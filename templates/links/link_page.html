{% extends "base.html" %}
{% load static %}
{% block title %}{{ profile.name }} ë§í¬ ëª¨ìŒ{% endblock %}
{% block content %}
<div class="marquee" style="--accent: {{ profile.accent_color }};">
  <div class="marquee__inner">
    {% for _ in "12" %}
      <div class="marquee__group">
        {% for text in marquee_texts %}
          <span class="marquee__text">{{ text }}</span>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
</div>

<section class="hero" style="--accent: {{ profile.accent_color }}; --btn-radius: {{ profile.button_radius }}px;">
  <div class="hero__background">
    <div class="hero__glow" aria-hidden="true"></div>
  </div>
  <div class="hero__card">
    <header class="hero__header">
      {% if profile.avatar %}
        <div class="hero__avatar-link" aria-label="í”„ë¡œí•„ ì´ë¯¸ì§€">
          <img src="{{ profile.avatar.url }}" alt="{{ profile.name }}" class="hero__avatar" />
        </div>
      {% endif %}
      <div class="hero__identity">
        <div class="hero__chip">{{ profile.name }}</div>
      </div>
    <div class="hero__socials">
        {% if profile.instagram_url %}
          <a href="{{ profile.instagram_url }}" class="hero__social" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
              <img src="{% static 'icons/instagram.svg' %}" alt="Instagram">
              <i class="fa-brands fa-instagram"></i>
          </a>
        {% endif %}
        {% if profile.facebook_url %}
          <a href="{{ profile.facebook_url }}" class="hero__social" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
              <img src="{% static 'icons/facebook.svg' %}" alt="Instagram">
              <i class="fa-brands fa-facebook"></i>
          </a>
        {% endif %}
        {% if profile.youtube_url %}
          <a href="{{ profile.youtube_url }}" class="hero__social" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
              <img src="{% static 'icons/youtube.svg' %}" alt="Instagram">
              <i class="fa-brands fa-youtube"></i>
          </a>
        {% endif %}
        {% if profile.thread_url %}
          <a href="{{ profile.thread_url }}" class="hero__social" target="_blank" rel="noopener noreferrer" aria-label="Threads">
              <img src="{% static 'icons/threads.svg' %}" alt="Instagram">
              <i class="fa-brands fa-threads"></i>
          </a>
        {% endif %}
      </div>
      {% if profile.bio %}
        <p class="hero__bio">{{ profile.bio }}</p>
      {% endif %}
      <div class="hero__search" aria-label="ë§í¬ ê²€ìƒ‰">
        <form method="get">
          {% if active_hashtag %}
            <input type="hidden" name="hashtag" value="{{ active_hashtag }}" />
          {% endif %}
          <div class="hero__search-field">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input
              type="search"
              name="q"
              value="{{ search_query }}"
              placeholder="ê²€ìƒ‰"
              aria-label="ê²€ìƒ‰"
            />
            {% if search_query %}
              <a
                class="hero__search-clear"
                href="?{% if active_hashtag %}hashtag={{ active_hashtag|urlencode }}{% endif %}"
                aria-label="ê²€ìƒ‰ ì´ˆê¸°í™”"
              >
                âœ•
              </a>
            {% endif %}
          </div>
        </form>
      </div>
      {% if available_hashtags %}
        <div class="hero__hashtags" aria-label="í•´ì‹œíƒœê·¸ í•„í„°">
          <a
            class="hero__tag {% if not active_hashtag %}hero__tag--active{% endif %}"
            href="?{% if search_query %}q={{ search_query|urlencode }}{% endif %}"
          >
            ì „ì²´
          </a>
          {% for tag in available_hashtags %}
            <a
              class="hero__tag {% if tag == active_hashtag %}hero__tag--active{% endif %}"
              href="?{% if search_query %}q={{ search_query|urlencode }}&{% endif %}hashtag={{ tag|urlencode }}"
            >
              #{{ tag }}
            </a>
          {% endfor %}
        </div>
      {% endif %}
    </header>
    <div class="hero__links">
      {% for link in links %}
        <a
          class="hero__button {% if link.is_primary %}hero__button--primary{% endif %}"
          href="{% url 'links:link_redirect' profile.slug link.id %}"
          target="_blank"
          rel="noopener noreferrer"
        >
          <div class="hero__button-leading">
            {% if link.icon_image or link.icon %}
              {% if link.icon_image_url %}
                <span class="hero__icon hero__icon--image">
                  <img src="{{ link.icon_image_url }}" alt="" loading="lazy" class="hero__icon-img" />
                </span>
              {% else %}
                <span class="hero__icon">{{ link.icon }}</span>
              {% endif %}
            {% endif %}
            <span>{{ link.label }}</span>
          </div>
          <div class="hero__button-meta">
            {% if link.show_discount_badge %}
              <span class="hero__sale"> ğŸ’¸í• ì¸ </span>
            {% endif %}
            {% if link.show_popular_badge %}
              <span class="hero__best"> ğŸ‘ì¸ê¸° </span>
            {% endif %}
            {% if profile.show_total_clicks %}
              <span class="hero__clicks"> â™¥ï¸ ì´ {{ link.click_count }} í´ë¦­ </span>
            {% endif %}
          </div>

        </a>
      {% empty %}
        <p class="hero__bio">ì¶”ê°€ëœ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ì„œ ë§í¬ë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.</p>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
